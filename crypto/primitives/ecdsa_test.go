package primitives

import (
	"crypto/sha256"
	"fmt"
	"hyperchain/common"
	"testing"
)

func TestECDSAVerifyTransport(t *testing.T) {
	msg := []byte("hyperchain")
	h := sha256.New()

	digest := make([]byte, 32)
	h.Write(msg)
	h.Sum(digest[:0])

	fmt.Println("hash", common.ToHex(digest))

	sign := common.Hex2Bytes("3046022100e94878e31e7ab4d707144ba17c516c13c7b10860fc09d79fda192aef35a95408022100d9031e82f7b40b4bb1a5922b92d3309676e3d4118df2fb34b4dda7fddb3cc8d3")
	pubkeyPem, err := GetConfig("/Users/chenquan/Workspace/java/encrypt/src/test/resources/cert/u.pub")
	if err != nil {
		t.Error(err)
	}

	pubkey, _ := ParsePubKey(pubkeyPem)

	b, e := ECDSAVerifyTransport(pubkey, msg, sign)
	t.Log(b)
	t.Log(e)

}

//
//func TestECDSAVerifyTransport2(t *testing.T) {
//	tcertPem := `-----BEGIN CERTIFICATE-----
//	MIIB/DCCAaGgAwIBAgIBATAKBggqhkjOPQQDAjBMMRMwEQYDVQQKEwpIeXBlcmNo
//	YWluMRYwFAYDVQQDEw1oeXBlcmNoYWluLmNuMRAwDgYDVQQqEwdEZXZlbG9wMQsw
//	CQYDVQQGEwJaSDAgFw0xNzAxMTMwNDMwMDJaGA8yMTE2MTIyMDA1MzAwMlowTDET
//	MBEGA1UEChMKSHlwZXJjaGFpbjEWMBQGA1UEAxMNaHlwZXJjaGFpbi5jbjEQMA4G
//	A1UEKhMHRGV2ZWxvcDELMAkGA1UEBhMCWkgwWTATBgcqhkjOPQIBBggqhkjOPQMB
//	BwNCAARA0ZPMeLwcew6ZOtTb38lKkVoJEYsa7+LASn9ZC5sLCqcSQFiUzgVZAXVz
//	yxfPVr00eNcV1D941Xh80bOEXrqfo3IwcDAOBgNVHQ8BAf8EBAMCAgQwJgYDVR0l
//	BB8wHQYIKwYBBQUHAwIGCCsGAQUFBwMBBgIqAwYDgQsBMA8GA1UdEwEB/wQFMAMB
//	Af8wDQYDVR0OBAYEBAECAwQwFgYDKgMEBA9leHRyYSBleHRlbnNpb24wCgYIKoZI
//	zj0EAwIDSQAwRgIhAJwIdpGOrHwBQV1SpWArnzU+94nZwioWMgSYZVXkQPJ+AiEA
//	7K2RRBYYUupIfAYNkpHLH9SY+Grj9tGzzMjTyE7oLOk=
//	-----END CERTIFICATE-----`
//	signHex := "3045022100f1b48d141473a541012088cb42e8a22fd74b77c57ae6bcd4dc719e4fa952482a02201f57fc983e0f93f9365ed15c738547f03b0915b9f2500d8f8814c86a660cb357"
//
//	msgHex := "7b226a736f6e727063223a22322e30222c20226d6574686f64223a2022636572745f6765745443657274222c22706172616d73223a5b7b227075626b6579223a223264326432643264326434323435343734393465323034353433323035303535343234633439343332303462343535393264326432643264326430613464343636623737343537373539343834623666356134393761366133303433343135313539343934623666356134393761366133303434343135313633343435313637343134353664326634333737343834333538363834333434373337393633333832663530373733303466333936353339333133383433353837373432306133373438353632623332343935313534366336393638373634613733346635323330353133363463363336613730363134663531353433303731343535393333363833353334366634343437346536383639353134663537333236333435373035303465373235313761333932623334366134313364336430613264326432643264326434353465343432303435343332303530353534323463343934333230346234353539326432643264326432643061227d5d2c226964223a317d"
//
//	tcert,err :=  ParseCertificate(tcertPem)
//	if err!= nil{
//		t.Error("fail to parse tcert",err)
//	}
//
//	common.Hex2Bytes
//
//	ECDSAVerifyTransport()
//}
