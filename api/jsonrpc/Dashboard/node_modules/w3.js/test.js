var SF = require("./w3.js");
var abi = '[{"constant":false,"inputs":[{"name":"num1","type":"uint32"},{"name":"num2","type":"uint32"}],"name":"add","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"getSum","outputs":[{"name":"","type":"uint32"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getHello","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"increment","outputs":[],"payable":false,"type":"function"}]';
var funabi = {"constant":true,"inputs":[],"name":"getHello","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"}
var sf = new SF(funabi);
var data  = sf.getData();
console.log(data);

var out = "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000096161616262626363630000000000000000000000000000000000000000000000"
console.log(sf.unpackOutput(out));


var greeterSource = 'contract Accumulator{     uint32 sum = 0;     string hello = "aaabbbccc";      function increment(){         sum = sum + 1;     }      function getSum() returns(uint32){         return sum;     }      function getHello() constant returns(string){         return hello;     }      function add(uint32 num1,uint32 num2) {         sum = sum+num1+num2;     } }'

var greeterCompiled = web3.eth.compile.solidity(greeterSource)


var greeterContract = web3.eth.contract(greeterCompiled.Accumulator.info.abiDefinition);

var greeter = greeterContract.new({from:web3.eth.accounts[0], data: greeterCompiled.Accumulator.code, gas: 300000}, function(e, contract){
    if(!e) {
      if(!contract.address) {
        console.log("Contract transaction send: TransactionHash: " + contract.transactionHash + " waiting to be mined...");
      } else {
        console.log("Contract mined! Address: " + contract.address);
        console.log(contract);
      }
    }
})